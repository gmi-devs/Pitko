"use strict";var cart={key:"pitkocart",items:[],init:function(){var t=localStorage.getItem(cart.key);t?cart.items=JSON.parse(t):(cart.items=[],cart.sync())},sync:function(){var t=JSON.stringify(cart.items);localStorage.setItem(cart.key,t)},find:function(e){var t=cart.items.filter(function(t){if(t.id==e)return!0});if(t&&t[0])return t[0]},add:function(t,e,n,a,i,r){if(cart.find(t))cart.inc(t,r);else{var c={id:t,name:e,img:n,pck:a,price:i,qty:r,total:r*i};cart.items.push(c),cart.sync()}},inc:function(e,t){var n=1<arguments.length&&void 0!==t?t:1;cart.items=cart.items.map(function(t){return t.id===e&&(t.qty=t.qty+n),t.total=cart.productTotalPrice(t.qty,t.price),t}),cart.sync()},dec:function(e,t){var n=1<arguments.length&&void 0!==t?t:1;cart.items=cart.items.map(function(t){if(t.id===e){if(1===t.qty)return t;t.qty=t.qty-n,t.total=cart.productTotalPrice(t.qty,t.price)}return t}),cart.sync()},productTotalPrice:function(t,e){return t*e},remove:function(e){cart.items=cart.items.filter(function(t){if(t.id!==e)return!0}),cart.sync()},empty:function(){cart.items=[],cart.sync()}};function addItem(t){var e=t.parentNode.parentNode,n=t.dataset.id,a=t.dataset.name,i=t.dataset.imgsrc,r=e.querySelector(".packing .active").dataset.pck,c=parseFloat(e.querySelector(".packing .active").dataset.price),o=parseInt(e.querySelector(".quantity input").value),s=constructId(n,r);cart.add(s,a,i,r,c,o),buildCart()}function constructId(t,e){return e=e.replace(/[.,\s]/g,""),parseInt(t+e)}function buildCart(){var l=document.querySelector(".cart-overview"),t=document.querySelectorAll(".cart-icon");l.innerHTML="";var e=cart.items;if(e.length){var n=document.createElement("h2");n.textContent="SADRŽAJ KOŠARICE",l.appendChild(n),removeCartIndicator(t),setTimeout(function(){addCartIndicator(t)},100)}else{l.innerHTML='<div class="empty-cart">\t\t\t\t\t\t<p>Tvoja košarica je prazna!</p>\t\t\t\t\t\t<div><a href="/#pive" onclick="slideToProducts(this, event)"><button class="button black">Odaberi pitko</button></a><div>\t\t\t\t\t\t</div>',removeCartIndicator(t)}if(e.forEach(function(t){var e=document.createElement("div");e.className="product";var n=new Image;n.src=t.img,e.appendChild(n);var a=document.createElement("div");a.className="controls",e.appendChild(a);var i=document.createElement("span");i.textContent="-",i.setAttribute("data-id",t.id),a.appendChild(i),i.addEventListener("click",decrementCart);var r=document.createElement("span");r.className="qty",r.textContent=t.qty,a.appendChild(r);var c=document.createElement("span");c.textContent="+",c.setAttribute("data-id",t.id),a.appendChild(c),c.addEventListener("click",incrementCart),e.appendChild(a);var o=document.createElement("span");o.className="packing",o.textContent=t.pck+" l",e.appendChild(o);var s=document.createElement("span");s.className="price",s.textContent=t.total.toFixed(2)+" kn",e.appendChild(s);var d=document.createElement("button");d.className="remove",d.textContent="Obriši",d.setAttribute("data-id",t.id),e.appendChild(d),d.addEventListener("click",removeCartItem),l.appendChild(e)}),e.length){var a=document.createElement("div");a.className="cart-summary";a.innerHTML='\t\t\t\t\t\x3c!--<div class="product-sum"><span>Ukupna cijena piva</span><span>30,00 kn</span></div>--\x3e\t\t\t\t\t\x3c!--<div class="delivery"><span>Dostava</span><span>20,00 kn</span></div>--\x3e\t\t\t\t\t<div class="total"><span>UKUPNO ZA PLATITI</span><span class="total-price"></span></div>\t\t\t\t\t<div class="controls"><a href="/#pive" onclick="slideToProducts(this, event)" class="button white wborder">Nastavi kupovinu</a><a href="/nalog" class="button black order">Naruči</a></div>\t\t\t\t\t<p>Minimalan broj za narudžbu je šest piva.!</p>',l.appendChild(a),numberOfProducts(),updateTotalPrice()}}function numberOfProducts(){var t=document.querySelector(".cart-summary .order"),e=cart.items,n=0;e.forEach(function(t){n+=t.qty}),6<=n?t.classList.remove("disabled"):t.classList.add("disabled")}function addCartIndicator(t){t.forEach(function(t){t.classList.add("indicate")})}function removeCartIndicator(t){t.forEach(function(t){t.classList.remove("indicate")})}function incrementCart(t){t.preventDefault();var e=parseInt(t.target.getAttribute("data-id"));cart.inc(e,1);var n=t.target.parentElement.querySelector(".qty"),a=t.target.parentElement.parentElement.querySelector(".price"),i=cart.find(e);i&&(n.textContent=i.qty,a.textContent=i.total.toFixed(2)+" kn"),updateTotalPrice(),numberOfProducts()}function decrementCart(t){t.preventDefault();var e=parseInt(t.target.getAttribute("data-id"));cart.dec(e,1);var n=t.target.parentElement.querySelector(".qty"),a=t.target.parentElement.parentElement.querySelector(".price"),i=cart.find(e);i&&(n.textContent=i.qty,a.textContent=i.total.toFixed(2)+" kn"),updateTotalPrice(),numberOfProducts()}function removeCartItem(t){t.preventDefault();var e=parseInt(t.target.getAttribute("data-id"));cart.remove(e);var n=t.target.parentElement;n.parentNode.removeChild(n),buildCart()}function updateTotalPrice(){var t=document.querySelector(".total-price"),e=cart.items,n=0;e.forEach(function(t){n+=t.qty*t.price}),t.textContent=n.toFixed(2)+" kn",localStorage.setItem("pitotalprice",n)}document.addEventListener("DOMContentLoaded",function(){cart.init(),buildCart()});var module={};function incVal(t){var e=t.parentNode.querySelector("input[type='number']"),n=parseInt(e.value,10);(n=isNaN(n)?0:n)>=e.getAttribute("max")?e.value=e.getAttribute("max"):e.value=++n}function decVal(t){var e=t.parentNode.querySelector("input[type='number']"),n=parseInt(e.value,10);(n=isNaN(n)?0:n)<=e.getAttribute("min")?e.value=e.getAttribute("min"):e.value=--n}function selectPacking(t){$(t).addClass("active").siblings().removeClass("active")}function submitForm(t){t.preventDefault();var e=document.getElementById("order-form"),n=(e.action,[]);if(e.submitted.value=!1,$("form#order-form input[required]").each(function(t,e){"text"===e.type&&(""===e.value?(e.classList="error",n.push(e)):(e.classList.remove("error"),n.splice(t,1))),"checkbox"===e.type&&(e.checked?($(e).parent().removeClass("error"),n.splice(t,1)):($(e).parent().addClass("error"),n.push(e)))}),e.cart.value=localStorage.getItem(cart.key),e.total.value=localStorage.getItem("pitotalprice"),0===n.length)e.submitted.value=!0,e.submit();else{var a=0;a=window.matchMedia("(min-width: 1300px)").matches?40:110,$("html, body").animate({scrollTop:$(n).first().offset().top-a},500)}}function toggleCart(t){t.preventDefault(),$("#cart-overview").toggle()}function slideToProducts(t,e){$("body").hasClass("home")&&(e.preventDefault(),0<$(t).parents("#cart-overview").length?$("#cart-overview").slideUp(200,function(){$("html").animate({scrollTop:$("#pive").offset().top},500)}):$("html").animate({scrollTop:$("#pive").offset().top},500))}module.navigation={navigationInit:function(){var t=window.matchMedia("(min-width: 768px)");this.menuTransform(t),t.addListener(this.menuTransform)},menuTransform:function(t){$("header *").removeAttr("style"),$(".hamb").removeClass("change").off("click"),t.matches?module.navigation.menuDesktop():module.navigation.menuMobile()},menuDesktop:function(){},menuMobile:function(){$(".hamb").on("click",function(){$(".pi-menu-container").is(":animated")||($(this).toggleClass("change"),$(".pi-menu-container").slideToggle(300))})}},module.pitkoSlider=function(){$(".pi-slider").wrapInner('<div class="pi-slides"></div>'),$(".pi-slides .slide").wrap('<div class="pi-slide"></div>');var t=1,e=$(".pi-slider .pi-slides"),n=e.find(".pi-slide"),a=$(".slider .prev"),i=$(".slider .next"),r=$(".pi-slider").width()/5,c=n.length;n.width(r),e.prepend(n.clone()),e.append(n.clone());var o=e.find(".pi-slide").length;n.eq(2).addClass("center"),e.width(r*o),e.css("left",-r*c),a.on("click",function(){e.is(":animated")||(t++,$(".pi-slide.center").removeClass("center").next().addClass("center"),e.animate({left:"-="+r},300,function(){6===t&&(t=1,e.append(n.clone()),$(".pi-slide:nth-child(-n+5)").remove(),e.css("left",-r*c))}))}),i.on("click",function(){e.is(":animated")||(t--,$(".pi-slide.center").removeClass("center").prev().addClass("center"),e.animate({left:"+="+r},300,function(){-4===t&&(t=1,e.prepend(n.clone()),$(".pi-slide:nth-last-child(-n+5)").remove(),e.css("left",-r*c))}))})},module.slider=function(){var t=window.matchMedia("(min-width: 992px)"),e=new Siema,n=$(".slider .prev"),a=$(".slider .next");function i(){n.off("click"),a.off("click"),e.destroy(!0),t.matches?(module.pitkoSlider(),r()):(e=new Siema({loop:!0,perPage:{480:3},onInit:r}),n.on("click",function(){e.prev()}),a.on("click",function(){e.next()}))}function r(){var t=$(".slider-core"),e=t.height();$(".slider-container").animate({height:e},200,function(){t.removeClass("init"),$(this).height("auto")})}t.addListener(i),i()},module.accordion=function(){$(".accordion .control").on("click",function(){$(this).closest(".accordion").find(".answer").is(":animated")||$(this).closest(".accordion").toggleClass("active").find(".answer").slideToggle(200)})},module.cookie=function(){!function(t){for(var e=t+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var i=n[a];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""}("cnst")&&$('<div class="cookie">\t\t<div class="container-1400">\t\t<p>Ova stranica koristi kolačiće u svrhe pružanja boljeg korisničkog iskustva. Ukoliko ste suglasni s tim, kliknite na "Slažem se", ukoliko želite saznati više o kolačićima, pogledajte <a href="/uvjeti-koristenja">uvjete korištenja</a>.</p>\t\t<button class="button black">Slažem se</button>\t\t</div>\t\t</div>').appendTo("body").fadeIn(),$(".cookie .button").on("click",function(){$(this).parent().parent().fadeOut(500,function(){!function(t,e,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var i="expires="+a.toGMTString();document.cookie=t+"="+e+";"+i+";path=/"}("cnst",1,30),$(this).remove()})})},$(document).ready(function(){module.navigation.navigationInit(),module.accordion(),module.cookie()}),window.onload=function(){0<$(".slider").length&&module.slider()};