"use strict";var cart={key:"pitkocart",items:[],init:function(){var t=localStorage.getItem(cart.key);t?cart.items=JSON.parse(t):(cart.items=[],cart.sync())},sync:function(){var t=JSON.stringify(cart.items);localStorage.setItem(cart.key,t)},find:function(e){var t=cart.items.filter(function(t){if(t.id==e)return!0});if(t&&t[0])return t[0]},add:function(t,e,a,n,i,r){if(cart.find(t))cart.inc(t,r);else{var o={id:t,name:e,img:a,pck:n,price:i,qty:r,total:r*i};cart.items.push(o),cart.sync()}},inc:function(e,t){var a=1<arguments.length&&void 0!==t?t:1;cart.items=cart.items.map(function(t){return t.id===e&&(t.qty=t.qty+a),t.total=cart.productTotalPrice(t.qty,t.price),t}),cart.sync()},dec:function(e,t){var a=1<arguments.length&&void 0!==t?t:1;cart.items=cart.items.map(function(t){if(t.id===e){if(1===t.qty)return t;t.qty=t.qty-a,t.total=cart.productTotalPrice(t.qty,t.price)}return t}),cart.sync()},productTotalPrice:function(t,e){return t*e},remove:function(e){cart.items=cart.items.filter(function(t){if(t.id!==e)return!0}),cart.sync()},empty:function(){cart.items=[],cart.sync()}};function addItem(t){var e=t.parentNode.parentNode,a=t.dataset.id,n=t.dataset.name,i=t.dataset.imgsrc,r=e.querySelector(".packing .active").dataset.pck,o=parseFloat(e.querySelector(".packing .active").dataset.price),c=parseInt(e.querySelector(".quantity input").value),s=constructId(a,r);cart.add(s,n,i,r,o,c),buildCart()}function constructId(t,e){return e=e.replace(/[.,\s]/g,""),parseInt(t+e)}function buildCart(){var l=document.querySelector(".cart-overview"),t=document.querySelectorAll(".cart-icon");l.innerHTML="";var e=cart.items;if(e.length){var a=document.createElement("h2");a.textContent="SADRŽAJ KOŠARICE",l.appendChild(a),removeCartIndicator(t),setTimeout(function(){addCartIndicator(t)},100)}else{l.innerHTML='<div class="empty-cart">\t\t\t\t\t\t<p>Tvoja košarica je prazna!</p>\t\t\t\t\t\t<div><a href="/#pive" onclick="slideToProducts(this, event)"><button class="button black">Odaberi pitko</button></a><div>\t\t\t\t\t\t</div>',removeCartIndicator(t)}if(e.forEach(function(t){var e=document.createElement("div");e.className="product";var a=new Image;a.src=t.img,e.appendChild(a);var n=document.createElement("div");n.className="controls",e.appendChild(n);var i=document.createElement("span");i.textContent="-",i.setAttribute("data-id",t.id),n.appendChild(i),i.addEventListener("click",decrementCart);var r=document.createElement("span");r.className="qty",r.textContent=t.qty,n.appendChild(r);var o=document.createElement("span");o.textContent="+",o.setAttribute("data-id",t.id),n.appendChild(o),o.addEventListener("click",incrementCart),e.appendChild(n);var c=document.createElement("span");c.className="packing",c.textContent=t.pck+" l",e.appendChild(c);var s=document.createElement("span");s.className="price",s.textContent=t.total.toFixed(2)+" kn",e.appendChild(s);var d=document.createElement("button");d.className="remove",d.textContent="Obriši",d.setAttribute("data-id",t.id),e.appendChild(d),d.addEventListener("click",removeCartItem),l.appendChild(e)}),e.length){var n=document.createElement("div");n.className="cart-summary";n.innerHTML='\t\t\t\t\t<div class="pricing-container">\t\t\t\t\t\t<div class="col">\t\t\t\t\t\t\t<span>Povratna naknada</span>\t\t\t\t\t\t\t<span class="product-sum">UKUPNO ZA PLATITI</span>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="col">\t\t\t\t\t\t\t<span class="total-refund"></span>\t\t\t\t\t\t\t<span class="product-sum total-price"></span>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="controls"><a href="/#pive" onclick="slideToProducts(this, event)" class="button white wborder">Nastavi kupovinu</a><a href="/nalog" class="button black order">Naruči</a></div>\t\t\t\t\t<div class="delivery">Cijena dostave po paketu iznosi 30,00kn&nbsp;+&nbsp;PDV. <br/> Dostavu plaća primatelj prilikom preuzimanja paketa. <br/> Pakete šaljemo dostavnom službom <a class="link-black" href="https://www.dpd.com/hr/home/produkti_i_usluge" target="blank">DPD Croatia.</a></div>\t\t\t\t\t<div class="min-order">Minimalan broj za narudžbu je 12 piva.</div>',l.appendChild(n),numberOfProducts(),updateTotalPrice()}}function numberOfProducts(){var t=document.querySelector(".cart-summary .order"),e=cart.items,a=0;e.forEach(function(t){a+=t.qty}),12<=a?t.classList.remove("disabled"):t.classList.add("disabled")}function addCartIndicator(t){t.forEach(function(t){t.classList.add("indicate")})}function removeCartIndicator(t){t.forEach(function(t){t.classList.remove("indicate")})}function incrementCart(t){t.preventDefault();var e=parseInt(t.target.getAttribute("data-id"));cart.inc(e,1);var a=t.target.parentElement.querySelector(".qty"),n=t.target.parentElement.parentElement.querySelector(".price"),i=cart.find(e);i&&(a.textContent=i.qty,n.textContent=i.total.toFixed(2)+" kn"),updateTotalPrice(),numberOfProducts()}function decrementCart(t){t.preventDefault();var e=parseInt(t.target.getAttribute("data-id"));cart.dec(e,1);var a=t.target.parentElement.querySelector(".qty"),n=t.target.parentElement.parentElement.querySelector(".price"),i=cart.find(e);i&&(a.textContent=i.qty,n.textContent=i.total.toFixed(2)+" kn"),updateTotalPrice(),numberOfProducts()}function removeCartItem(t){t.preventDefault();var e=parseInt(t.target.getAttribute("data-id"));cart.remove(e);var a=t.target.parentElement;a.parentNode.removeChild(a),buildCart()}function updateTotalPrice(){var t=document.querySelector(".total-price"),e=document.querySelector(".total-refund"),a=cart.items,n=0,i=0;a.forEach(function(t){n+=t.qty*t.price,i+=.5*t.qty}),e.textContent=i.toFixed(2)+" kn",t.textContent=n.toFixed(2)+" kn",localStorage.setItem("pitotalprice",n)}document.addEventListener("DOMContentLoaded",function(){cart.init(),buildCart()});var module={};function incVal(t){var e=t.parentNode.querySelector("input[type='number']"),a=parseInt(e.value,10);(a=isNaN(a)?0:a)>=e.getAttribute("max")?e.value=e.getAttribute("max"):e.value=++a}function decVal(t){var e=t.parentNode.querySelector("input[type='number']"),a=parseInt(e.value,10);(a=isNaN(a)?0:a)<=e.getAttribute("min")?e.value=e.getAttribute("min"):e.value=--a}function selectPacking(t){$(t).addClass("active").siblings().removeClass("active")}function submitForm(t){t.preventDefault();var e=document.getElementById("order-form"),a=(e.action,[]);if(e.submitted.value=!1,$("form#order-form input[required]").each(function(t,e){"text"===e.type&&(""===e.value?(e.classList="error",a.push(e)):(e.classList.remove("error"),a.splice(t,1))),"checkbox"===e.type&&(e.checked?($(e).parent().removeClass("error"),a.splice(t,1)):($(e).parent().addClass("error"),a.push(e)))}),e.cart.value=localStorage.getItem(cart.key),e.total.value=localStorage.getItem("pitotalprice"),0===a.length)e.submitted.value=!0,e.submit();else{var n=0;n=window.matchMedia("(min-width: 1300px)").matches?40:110,$("html, body").animate({scrollTop:$(a).first().offset().top-n},500)}}function slideToProducts(t,e){$("body").hasClass("home")&&(e.preventDefault(),0<$(t).parents("#cart-overview").length?$("#cart-overview").slideUp(200,function(){$("html, body").animate({scrollTop:$("#pive").offset().top},500)}):$("html, body").animate({scrollTop:$("#pive").offset().top},500))}module.navigation={navigationInit:function(){var t=window.matchMedia("(min-width: 768px)");this.menuTransform(t),t.addListener(this.menuTransform)},menuTransform:function(t){$("header *").removeAttr("style"),$(".hamb").removeClass("change").off("click"),$(".open-cart").off("click"),t.matches?module.navigation.menuDesktop():module.navigation.menuMobile()},menuDesktop:function(){$(".open-cart").click(function(){$("#cart-overview").toggle()})},menuMobile:function(){$(".hamb").on("click",function(){$(".pi-menu-container").is(":animated")||($(this).toggleClass("change"),$(".pi-menu-container").slideToggle(300),$("#cart-overview").slideUp(300))}),$(".open-cart").click(function(){$("#cart-overview").slideToggle(300),$(".pi-menu-container").slideUp(300),$(".hamb").removeClass("change")})}},module.pitkoSlider=function(){$(".pi-slider").wrapInner('<div class="pi-slides"></div>'),$(".pi-slides .slide").wrap('<div class="pi-slide"></div>');var t=1,e=$(".pi-slider .pi-slides"),a=e.find(".pi-slide"),n=$(".slider .prev"),i=$(".slider .next"),r=$(".pi-slider").width()/5,o=a.length;a.width(r),e.prepend(a.clone()),e.append(a.clone());var c=e.find(".pi-slide").length;a.eq(2).addClass("center"),e.width(r*c),e.css("left",-r*o),n.on("click",function(){e.is(":animated")||(t++,$(".pi-slide.center").removeClass("center").next().addClass("center"),e.animate({left:"-="+r},300,function(){t===o+1&&(t=1,e.append(a.clone()),$(".pi-slide:nth-child(-n + "+o+")").remove(),e.css("left",-r*o))}))}),i.on("click",function(){e.is(":animated")||(t--,$(".pi-slide.center").removeClass("center").prev().addClass("center"),e.animate({left:"+="+r},300,function(){t===-(o-1)&&(t=1,e.prepend(a.clone()),$(".pi-slide:nth-last-child(-n + "+o+")").remove(),e.css("left",-r*o))}))})},module.slider=function(){var t=window.matchMedia("(min-width: 992px)"),e=new Siema,a=$(".slider .prev"),n=$(".slider .next");function i(){a.off("click"),n.off("click"),e.destroy(!0),t.matches?(module.pitkoSlider(),r()):(e=new Siema({loop:!0,perPage:{480:3},onInit:r}),a.on("click",function(){e.prev()}),n.on("click",function(){e.next()}))}function r(){var t=$(".slider-core"),e=t.height();$(".slider-container").animate({height:e},200,function(){t.removeClass("init"),$(this).height("auto")})}t.addListener(i),i()},module.accordion=function(){$(".accordion .control").on("click",function(){$(this).closest(".accordion").find(".answer").is(":animated")||$(this).closest(".accordion").toggleClass("active").find(".answer").slideToggle(200)})},module.cookie=function(){!function(t){for(var e=t+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var i=a[n];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""}("cnst")&&$('<div class="cookie">\t\t<div class="container-1400">\t\t<p>Ova stranica koristi kolačiće u svrhe pružanja boljeg korisničkog iskustva. Ukoliko ste suglasni s tim, kliknite na "Slažem se", ukoliko želite saznati više o kolačićima, pogledajte <a href="/uvjeti-koristenja">uvjete korištenja</a>.</p>\t\t<button class="button black">Slažem se</button>\t\t</div>\t\t</div>').appendTo("body").fadeIn(),$(".cookie .button").on("click",function(){$(this).parent().parent().fadeOut(500,function(){!function(t,e,a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var i="expires="+n.toGMTString();document.cookie=t+"="+e+";"+i+";path=/"}("cnst",1,30),$(this).remove()})})},$(document).ready(function(){module.navigation.navigationInit(),module.accordion(),module.cookie()}),$("form#order-form input[required]").focus(function(){$(this).removeClass("error"),$(this).parent().removeClass("error")}),window.onload=function(){0<$(".slider").length&&module.slider()};